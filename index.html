<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="theme-color" content="#059669">
<title>ğŸµ Monkeys Score Board</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--j-dark:#064e3b;--j-primary:#059669;--j-light:#6ee7b7;--j-bg:#d1fae5;--brown:#92400e;--leaf:#10b981;--yellow:#fbbf24;--danger:#dc2626}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#059669 0%,#064e3b 50%,#065f46 100%);background-attachment:fixed;min-height:100vh;padding:12px;color:#1F2937;-webkit-font-smoothing:antialiased}
.container{max-width:900px;margin:0 auto}
.card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;padding:20px;margin-bottom:20px;box-shadow:0 8px 32px rgba(6,78,59,.15);border:1px solid rgba(16,185,129,.2)}
.header{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;padding:24px;margin-bottom:20px;box-shadow:0 10px 40px rgba(6,78,59,.2);border:2px solid rgba(16,185,129,.3)}
.header h1{font-size:28px;font-weight:800;background:linear-gradient(135deg,#059669 0%,#064e3b 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px}
.tabs{display:flex;gap:8px;margin-bottom:16px;overflow-x:auto}
.tab-btn{padding:12px 20px;border:none;background:var(--j-bg);border-radius:14px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s;white-space:nowrap;color:var(--j-dark)}
.tab-btn:hover{background:var(--j-light);transform:translateY(-2px)}
.tab-btn.active{background:var(--j-primary);color:white;box-shadow:0 4px 16px rgba(5,150,105,.4)}
.tab-content{display:none}
.tab-content.active{display:block;animation:fadeIn .3s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.controls input,.controls select,.controls button{padding:12px 18px;border:2px solid rgba(16,185,129,.3);border-radius:14px;font-size:14px;font-weight:600;transition:all .2s;background:white}
.controls button{background:var(--j-primary);color:white;border:none;cursor:pointer;box-shadow:0 2px 8px rgba(5,150,105,.3)}
.controls button:hover{transform:translateY(-2px);background:var(--j-dark)}
.btn-success{background:var(--leaf)!important}
.btn-danger{background:var(--danger)!important}
.btn-warning{background:var(--yellow)!important;color:var(--brown)!important}
.player-card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:18px;padding:20px;margin-bottom:16px;box-shadow:0 4px 20px rgba(6,78,59,.12);border-left:6px solid;transition:all .3s}
.player-card:hover{box-shadow:0 8px 30px rgba(6,78,59,.18);transform:translateY(-2px)}
.player-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.player-photo{width:50px;height:50px;border-radius:50%;object-fit:cover;border:3px solid var(--j-primary);margin-right:10px;cursor:pointer}
.player-name{font-size:20px;font-weight:700;color:var(--j-dark)}
.player-score{font-size:32px;font-weight:800;color:var(--j-primary)}
.status-badge{padding:6px 14px;border-radius:14px;font-size:13px;font-weight:700;color:white}
.status-in{background:var(--leaf)}
.status-out{background:var(--danger);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
.dealer-badge{background:var(--yellow);color:var(--brown);padding:5px 12px;border-radius:14px;font-size:12px;font-weight:700}
.undo-btn{position:fixed;bottom:24px;right:24px;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--j-primary),var(--j-dark));color:white;border:3px solid rgba(255,255,255,.3);font-size:28px;cursor:pointer;box-shadow:0 8px 24px rgba(5,150,105,.5);z-index:999;transition:all .3s}
.undo-btn:hover:not(:disabled){transform:scale(1.1) rotate(-15deg)}
.undo-btn:disabled{background:#9CA3AF;opacity:.5}
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(6,78,59,.7);backdrop-filter:blur(8px)}
.modal-content{background:white;margin:5% auto;padding:32px;border-radius:24px;width:90%;max-width:700px;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(6,78,59,.4);border:3px solid var(--j-primary)}
.pin-modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background:rgba(6,78,59,.8);backdrop-filter:blur(10px)}
.pin-content{background:white;margin:20% auto;padding:40px;border-radius:24px;width:90%;max-width:400px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.4);border:3px solid var(--j-primary)}
.pin-input{width:100%;padding:16px;font-size:24px;text-align:center;border:3px solid var(--j-primary);border-radius:14px;margin:20px 0;letter-spacing:8px;font-weight:700}
.cert-container{background:white;width:297mm;height:210mm;padding:20mm;box-sizing:border-box;position:relative;margin:0 auto;box-shadow:0 0 20px rgba(0,0,0,.2)}
.cert-border{border:3mm double #059669;height:100%;padding:15mm;position:relative;box-sizing:border-box}
.cert-header{text-align:center;border-bottom:2px solid #059669;padding-bottom:10mm;margin-bottom:10mm}
.cert-logo{font-size:28pt;font-weight:800;color:#059669;letter-spacing:2px;margin-bottom:5mm}
.cert-subtitle{font-size:12pt;color:#92400e;font-weight:600}
.cert-body{text-align:center;padding:15mm 10mm}
.cert-title{font-size:36pt;font-weight:800;color:#064e3b;margin-bottom:15mm;letter-spacing:3px}
.cert-text{font-size:14pt;margin:8mm 0;line-height:1.6}
.cert-name{font-size:32pt;font-weight:800;color:#059669;margin:15mm 0;padding:8mm 0;border-top:2px solid #059669;border-bottom:2px solid #059669;letter-spacing:2px}
.cert-achievement{font-size:24pt;font-weight:800;color:#fbbf24;margin:12mm 0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}
.cert-details{font-size:11pt;color:#6B7280;margin:10mm 0}
.cert-footer{position:absolute;bottom:15mm;left:15mm;right:15mm;display:flex;justify-content:space-between;align-items:flex-end}
.cert-signature{text-align:center;width:35%}
.cert-sig-line{border-top:2px solid #000;padding-top:3mm;font-size:10pt;font-weight:600}
.cert-seal{position:absolute;bottom:15mm;right:50%;transform:translateX(50%);width:80mm;height:80mm;border-radius:50%;border:4mm solid #ffd700;background:radial-gradient(circle,#ffed4e,#ffd700);display:flex;align-items:center;justify-content:center;flex-direction:column;box-shadow:0 4px 12px rgba(0,0,0,.3)}
.cert-seal-text{font-size:10pt;font-weight:800;color:#92400e;text-align:center}
.cert-seal-icon{font-size:32pt;margin-bottom:2mm}
.cert-date{font-size:10pt;color:#6B7280;margin-top:8mm}
@media print{body{background:white!important}.cert-container{box-shadow:none;margin:0;width:297mm;height:210mm;page-break-after:always}@page{size:A4 landscape;margin:0}.modal,.header,.tabs,.controls,button:not(.no-hide){display:none!important}}
.gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;margin:20px 0}
.gallery-item{position:relative;border-radius:12px;overflow:hidden;cursor:pointer;aspect-ratio:1}
.gallery-item img{width:100%;height:100%;object-fit:cover;transition:transform .3s}
.gallery-item:hover img{transform:scale(1.1)}
.gallery-item .delete{position:absolute;top:5px;right:5px;background:var(--danger);color:white;border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;font-size:18px}
@media(max-width:768px){.header h1{font-size:22px}.player-name{font-size:18px}.player-score{font-size:28px}.cert-container{padding:20px}}
</style>
</head>
<body>
<button class="undo-btn" id="undoBtn" disabled>â†©ï¸</button>
<div class="pin-modal" id="pinModal">
<div class="pin-content">
<h2 style="color:var(--j-primary);margin-bottom:20px">ğŸ”’ Enter PIN</h2>
<input type="password" class="pin-input" id="pinInput" placeholder="â€¢â€¢â€¢â€¢" maxlength="4">
<div style="display:flex;gap:12px;justify-content:center">
<button onclick="cancelPin()" style="padding:14px 28px;border:none;border-radius:14px;font-weight:700;cursor:pointer;background:#9CA3AF;color:white">Cancel</button>
<button onclick="verifyPin()" style="padding:14px 28px;border:none;border-radius:14px;font-weight:700;cursor:pointer;background:var(--j-primary);color:white">Submit</button>
</div>
</div>
</div>
<div class="container">
<div class="header">
<h1>ğŸµ Monkeys Score Board</h1>
<div class="tabs">
<button class="tab-btn active" data-tab="game">ğŸ® Game</button>
<button class="tab-btn" data-tab="history">ğŸ“š History</button>
<button class="tab-btn" data-tab="stats">ğŸ“ˆ Stats</button>
<button class="tab-btn" data-tab="gallery">ğŸ“¸ Gallery</button>
</div>
<div class="tab-content active" id="game-tab">
<div class="controls">
<input type="text" id="gameName" placeholder="Game" value="Rummy" style="flex:1;min-width:120px">
<label style="font-weight:600">Target:</label>
<input type="number" id="targetPoint" value="330" style="width:90px">
<select id="sortBy" style="width:110px">
<option value="default">Default</option>
<option value="name">Name</option>
<option value="points">Points</option>
</select>
<button id="soundToggle">ğŸ”Š</button>
<button class="btn-warning" id="resetPointsBtn">ğŸ”„</button>
<button class="btn-danger" id="resetPlayersBtn">âŒ</button>
<button class="btn-success" id="reportBtn">ğŸ“‹</button>
</div>
</div>
<div class="tab-content" id="history-tab">
<div class="controls">
<button class="btn-success" id="saveGameBtn">ğŸ’¾ Save</button>
<button style="background:var(--j-primary);color:white" id="loadGamesBtn">ğŸ“‚ Load</button>
<button class="btn-danger" id="clearHistoryBtn">ğŸ—‘ï¸ Clear</button>
</div>
</div>
<div class="tab-content" id="stats-tab">
<div class="controls">
<button style="background:var(--j-primary);color:white" id="viewStatsBtn">ğŸ“Š Stats</button>
<button class="btn-success" id="refreshStatsBtn">ğŸ”„</button>
</div>
</div>
<div class="tab-content" id="gallery-tab">
<div class="controls">
<input type="file" id="galleryInput" accept="image/*" style="display:none">
<button class="btn-success" onclick="document.getElementById('galleryInput').click()">ğŸ“¸ Add Photo</button>
<button class="btn-danger" id="clearGalleryBtn">ğŸ—‘ï¸ Clear All</button>
</div>
<div class="gallery-grid" id="galleryGrid"></div>
</div>
</div>
<div class="card">
<div class="controls">
<input type="text" id="newPlayerName" placeholder="Player name" style="flex:1">
<button class="btn-success" id="addPlayerBtn">â•</button>
</div>
</div>
<div id="playersList"></div>
</div>
<div id="reportModal" class="modal"></div>
<div id="certModal" class="modal"></div>
<div id="historyModal" class="modal"></div>
<div id="statsModal" class="modal"></div>
<input type="file" id="playerPhotoInput" accept="image/*" style="display:none">
<script>
const PIN='1986';
let pendingAction=null,currentPhotoPlayer=null;
const sounds={enabled:!0,play(f,d){if(!this.enabled)return;try{const c=new(window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);o.frequency.value=f;g.gain.setValueAtTime(.3,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+d);o.start();o.stop(c.currentTime+d)}catch(e){}},add(){this.play(523,.1);setTimeout(()=>this.play(659,.1),80)},remove(){this.play(392,.15)},dealer(){this.play(440,.1);setTimeout(()=>this.play(659,.15),100)},out(){this.play(880,.1);setTimeout(()=>this.play(523,.2),150)},winner(){this.play(523,.15);setTimeout(()=>this.play(783,.15),150);setTimeout(()=>this.play(1047,.3),300)},click(){this.play(800,.05)},error(){this.play(200,.2)}};
const COLORS=['#d1fae5','#a7f3d0','#6ee7b7','#86efac','#bbf7d0','#bef264','#fef08a','#fde68a','#fcd34d'];
const INITIAL=[
{name:'HABIN',color:'#d1fae5'},{name:'NOUFAL',color:'#a7f3d0'},{name:'EMAD',color:'#6ee7b7'},
{name:'MUBASHIR',color:'#86efac'},{name:'LEO',color:'#bbf7d0'},{name:'ASIF',color:'#bef264'},
{name:'SHABIN',color:'#fef08a'},{name:'MUTHU',color:'#fde68a'},{name:'SALMAN',color:'#fcd34d'}
];
let state={gameName:'Rummy',targetPoint:330,players:INITIAL.map((p,i)=>({...p,id:Date.now()+i,scores:[],photo:'',dealerHistory:[]})),sortBy:'default',nextId:Date.now()+INITIAL.length,roundDealers:[],undoStack:[],gameHistory:[],playerStats:{},gallery:[]};
function showPin(a){pendingAction=a;document.getElementById('pinModal').style.display='block';document.getElementById('pinInput').value='';document.getElementById('pinInput').focus()}
function cancelPin(){document.getElementById('pinModal').style.display='none';pendingAction=null;document.getElementById('pinInput').value=''}
function verifyPin(){const i=document.getElementById('pinInput').value;if(i===PIN){document.getElementById('pinModal').style.display='none';document.getElementById('pinInput').value='';if(pendingAction){pendingAction();pendingAction=null}}else{sounds.error();alert('âŒ Wrong PIN!');document.getElementById('pinInput').value='';document.getElementById('pinInput').focus()}}
function load(){const s=localStorage.getItem('monkeysJungle');if(s){try{const d=JSON.parse(s);state={...state,...d}}catch(e){}}sounds.enabled=localStorage.getItem('soundEnabled')!=='false'}
function save(){localStorage.setItem('monkeysJungle',JSON.stringify(state));localStorage.setItem('soundEnabled',sounds.enabled)}
function pushUndo(a){state.undoStack.push(JSON.parse(JSON.stringify(a)));if(state.undoStack.length>20)state.undoStack.shift();document.getElementById('undoBtn').disabled=!1;save()}
function undo(){if(state.undoStack.length===0)return;const a=state.undoStack.pop();if(a.type==='addScore'){const p=state.players.find(pl=>pl.id===a.playerId);if(p&&p.scores.length>0)p.scores.pop()}document.getElementById('undoBtn').disabled=state.undoStack.length===0;sounds.click();save();render()}
function getSorted(){let s=[...state.players];if(state.sortBy==='name')s.sort((a,b)=>a.name.localeCompare(b.name));else if(state.sortBy==='points')s.sort((a,b)=>getTotal(b)-getTotal(a));return s}
function getTotal(p){return p.scores.reduce((s,v)=>s+v,0)}
function getMaxRounds(){return Math.max(...state.players.map(p=>p.scores.length),0)}
function getWinner(){const w=state.players.filter(p=>p.scores.length>0);if(w.length===0)return null;return w.reduce((l,p)=>getTotal(p)<getTotal(l)?p:l)}
function addPlayer(){const i=document.getElementById('newPlayerName'),n=i.value.trim().toUpperCase();if(!n)return alert('Enter name');if(state.players.some(p=>p.name===n))return alert('Player exists');const pl={id:state.nextId++,name:n,color:COLORS[state.players.length%COLORS.length],scores:[],photo:'',dealerHistory:[]};state.players.push(pl);pushUndo({type:'addPlayer',playerId:pl.id});i.value='';sounds.click();save();render()}
function addScore(id){const i=document.getElementById(`score-${id}`),s=parseInt(i.value);if(isNaN(s))return;const p=state.players.find(pl=>pl.id===id);if(!p)return;const wo=getTotal(p)>=state.targetPoint;p.scores.push(s);const io=getTotal(p)>=state.targetPoint;pushUndo({type:'addScore',playerId:id,score:s});i.value='';sounds.add();if(!wo&&io){sounds.out();const c=document.querySelector(`[data-player-id="${id}"]`);if(c){c.style.animation='none';setTimeout(()=>c.style.animation='pulse .5s',10)}}updateStats();save();render()}
function removeScore(id){const p=state.players.find(pl=>pl.id===id);if(!p||p.scores.length===0)return;p.scores.pop();sounds.remove();save();render()}
function setDealer(id){const r=getMaxRounds(),p=state.players.find(pl=>pl.id===id);if(!p)return;state.roundDealers[r]=p.name;sounds.dealer();save();render()}
function updateStats(){state.players.forEach(p=>{if(!state.playerStats[p.name])state.playerStats[p.name]={gamesPlayed:0,wins:0,totalScore:0,bestScore:Infinity,worstScore:0}})}
function saveGame(){if(state.players.length===0)return alert('No players');const gn=prompt('Game name:',state.gameName+' - '+new Date().toLocaleDateString());if(!gn)return;const gd={name:gn,date:new Date().toISOString(),gameName:state.gameName,targetPoint:state.targetPoint,players:JSON.parse(JSON.stringify(state.players)),roundDealers:[...state.roundDealers],winner:getWinner()};state.gameHistory.push(gd);const w=getWinner();state.players.forEach(p=>{const t=getTotal(p);if(t>0){const st=state.playerStats[p.name];st.gamesPlayed++;if(w&&p.id===w.id)st.wins++;st.totalScore+=t;st.bestScore=Math.min(st.bestScore,t);st.worstScore=Math.max(st.worstScore,t)}});sounds.click();save();alert('âœ… Saved!')}
function loadGames(){if(state.gameHistory.length===0)return alert('No saved games');let h=`<div class="modal-content"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--j-bg)"><h2 style="color:var(--j-primary);font-size:24px;font-weight:800">ğŸ“š History</h2><button style="font-size:32px;border:none;background:none;cursor:pointer;color:#9CA3AF" onclick="closeModal('historyModal')">&times;</button></div><div style="max-height:60vh;overflow-y:auto">`;state.gameHistory.forEach((g,i)=>{const d=new Date(g.date).toLocaleString(),w=g.winner?g.winner.name:'None';h+=`<div style="background:linear-gradient(to right,var(--j-bg),white);border-radius:14px;padding:16px;margin-bottom:12px;border-left:4px solid var(--j-primary);cursor:pointer;transition:all .2s" onclick="loadGame(${i})"><div style="font-weight:700;font-size:16px;color:var(--j-dark)">${g.name}</div><div style="color:#6B7280;font-size:13px;margin-top:4px">${d} â€¢ ${g.players.length} players â€¢ Winner: ${w}</div></div>`});h+=`</div></div>`;document.getElementById('historyModal').innerHTML=h;document.getElementById('historyModal').style.display='block'}
function loadGame(i){if(!confirm('Load game?'))return;const g=state.gameHistory[i];state.gameName=g.gameName;state.targetPoint=g.targetPoint;state.players=JSON.parse(JSON.stringify(g.players));state.roundDealers=[...g.roundDealers];state.undoStack=[];document.getElementById('gameName').value=state.gameName;document.getElementById('targetPoint').value=state.targetPoint;sounds.click();closeModal('historyModal');save();render();alert('âœ… Loaded!')}
function clearHistory(){showPin(()=>{state.gameHistory=[];sounds.click();save();alert('âœ… Cleared!')})}
function viewStats(){if(Object.keys(state.playerStats).length===0)return alert('No stats yet');let h=`<div class="modal-content"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--j-bg)"><h2 style="color:var(--j-primary);font-size:24px;font-weight:800">ğŸ“ˆ Statistics</h2><button style="font-size:32px;border:none;background:none;cursor:pointer;color:#9CA3AF" onclick="closeModal('statsModal')">&times;</button></div><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px">`;Object.entries(state.playerStats).forEach(([n,s])=>{const avg=s.gamesPlayed>0?(s.totalScore/s.gamesPlayed).toFixed(1):0,wr=s.gamesPlayed>0?((s.wins/s.gamesPlayed)*100).toFixed(0):0,b=s.bestScore===Infinity?0:s.bestScore;h+=`<div style="background:linear-gradient(135deg,rgba(209,250,229,.5),rgba(255,255,255,.95));border-radius:16px;padding:20px;text-align:center;box-shadow:0 4px 16px rgba(6,78,59,.1);border:2px solid rgba(16,185,129,.2)"><div style="font-size:18px;font-weight:700;margin-bottom:16px;color:var(--j-dark)">${n}</div><div style="font-size:36px;font-weight:800;color:var(--j-primary)">${s.gamesPlayed}</div><div style="font-size:13px;color:#6B7280;font-weight:600;margin-top:8px">Games</div><div style="margin-top:16px"><div style="font-size:20px;font-weight:700;color:var(--leaf)">${s.wins}</div><div style="font-size:13px;color:#6B7280;font-weight:600;margin-top:8px">Wins (${wr}%)</div></div><div style="margin-top:16px"><div style="font-size:18px;font-weight:600;color:var(--j-primary)">${avg}</div><div style="font-size:13px;color:#6B7280;font-weight:600;margin-top:8px">Avg</div></div><div style="margin-top:12px;display:flex;justify-content:space-around"><div><div style="font-size:16px;font-weight:600;color:var(--leaf)">${b}</div><div style="font-size:11px;color:#9CA3AF">Best</div></div><div><div style="font-size:16px;font-weight:600;color:var(--danger)">${s.worstScore}</div><div style="font-size:11px;color:#9CA3AF">Worst</div></div></div></div>`});h+=`</div></div>`;document.getElementById('statsModal').innerHTML=h;document.getElementById('statsModal').style.display='block'}
function showCert(){const w=getWinner();if(!w)return alert('No winner yet!');const d=new Date(),dateStr=d.toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'}),certNum=`UOM-${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}${String(d.getDate()).padStart(2,'0')}-${String(Math.floor(Math.random()*10000)).padStart(4,'0')}`,gn=state.gameName.toUpperCase(),h=`<div class="modal-content" style="max-width:100%;padding:20px"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><h2 style="color:var(--j-primary)">ğŸ† Championship Certificate</h2><button style="font-size:32px;border:none;background:none;cursor:pointer" onclick="closeModal('certModal')">&times;</button></div><div class="cert-container"><div class="cert-border"><div class="cert-header"><div class="cert-logo">ğŸµ UNIVERSE OF MONKEYS ğŸµ</div><div class="cert-subtitle">International Gaming Certification Authority</div><div style="font-size:8pt;color:#9CA3AF;margin-top:3mm">Established 1986 â€¢ Certification No: ${certNum}</div></div><div class="cert-body"><div class="cert-title">CHAMPIONSHIP CERTIFICATE</div><div class="cert-text">This is to certify that</div><div class="cert-name">${w.name}</div><div class="cert-text">has demonstrated exceptional skill and sportsmanship<br>and is hereby awarded the prestigious title of</div><div class="cert-achievement">ğŸ† ${gn} CHAMPION ğŸ†</div><div class="cert-details"><strong>Game:</strong> ${state.gameName} â€¢ <strong>Final Score:</strong> ${getTotal(w)} points<br><strong>Target Score:</strong> ${state.targetPoint} points â€¢ <strong>Total Rounds:</strong> ${getMaxRounds()}<br><strong>Total Players:</strong> ${state.players.length} competitors</div><div class="cert-text" style="margin-top:12mm;font-size:10pt;font-style:italic">This certificate acknowledges outstanding performance in competitive ${state.gameName.toLowerCase()} gaming<br>and represents the highest honor in the monkey gaming community</div></div><div class="cert-footer"><div class="cert-signature"><div class="cert-sig-line">Chief Gaming Officer</div><div style="font-size:8pt;color:#9CA3AF;margin-top:2mm">Universe of Monkeys</div></div><div class="cert-signature"><div class="cert-sig-line">Director of Championships</div><div style="font-size:8pt;color:#9CA3AF;margin-top:2mm">Gaming Authority</div></div></div><div class="cert-seal"><div class="cert-seal-icon">ğŸ†</div><div class="cert-seal-text">OFFICIAL<br>${gn}<br>CHAMPION<br>${d.getFullYear()}</div></div><div style="position:absolute;bottom:8mm;left:0;right:0;text-align:center;font-size:9pt;color:#9CA3AF">Issued on ${dateStr} â€¢ Valid Internationally â€¢ www.universemonkeys.org</div></div></div><div style="display:flex;gap:10px;margin-top:20px"><button class="no-hide" style="flex:1;padding:14px;background:var(--j-primary);color:white;border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer" onclick="printCert()">ğŸ–¨ï¸ Print Certificate</button><button class="no-hide" style="flex:1;padding:14px;background:var(--leaf);color:white;border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer" onclick="downloadCertPDF()">ğŸ“¥ Download PDF</button><button class="no-hide" style="flex:1;padding:14px;background:var(--yellow);color:var(--brown);border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer" onclick="shareCert()">ğŸ“¤ Share</button></div></div>`;document.getElementById('certModal').innerHTML=h;document.getElementById('certModal').style.display='block';sounds.winner()}
function printCert(){window.print()}
function downloadCertPDF(){alert('ğŸ“¥ To save as PDF:\n\n1. Click "Print Certificate"\n2. Select "Save as PDF" or "Microsoft Print to PDF"\n3. Choose location and save\n\nYour certificate will be saved as a PDF file!');printCert()}
function shareCert(){if(navigator.share){navigator.share({title:'Monkey Champion Certificate',text:`ğŸ† ${getWinner().name} is the Monkey Champion!`,url:window.location.href}).catch(()=>{})}else{alert('ğŸ“¤ To share:\n\n1. Click "Download PDF"\n2. Save the certificate\n3. Share the PDF file via WhatsApp, Email, or Social Media!\n\nOr take a screenshot to share quickly!')}}

function showReport(){const w=getWinner(),mr=getMaxRounds(),gn=state.gameName.toUpperCase();let h=`<div class="modal-content"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--j-bg)"><h2 style="color:var(--j-primary);font-size:24px;font-weight:800">ğŸ“‹ Report</h2><button style="font-size:32px;border:none;background:none;cursor:pointer;color:#9CA3AF" onclick="closeModal('reportModal')">&times;</button></div>`;if(w){h+=`<div style="background:linear-gradient(135deg,var(--yellow),var(--j-light));border-radius:20px;padding:40px;text-align:center;margin-bottom:30px;box-shadow:0 12px 40px rgba(5,150,105,.4);border:3px solid var(--j-primary)"><div style="font-size:100px;animation:bounce 2s infinite">ğŸ‘‘</div><div style="font-size:120px">ğŸµ</div><div style="font-size:42px;font-weight:800;color:var(--j-dark);text-shadow:2px 2px 4px rgba(0,0,0,.2);margin:20px 0">${gn} KING!</div><div style="font-size:36px;font-weight:700;color:var(--brown)">${w.name}</div><div style="font-size:24px;color:var(--brown);margin-top:12px;font-weight:700">Score: ${getTotal(w)}</div></div><button style="width:100%;padding:14px;background:gold;color:var(--brown);border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer;margin-bottom:20px" onclick="showCert()">ğŸ† Get Certificate</button>`}h+=`<div style="margin-bottom:24px"><h3 style="color:var(--j-primary);font-size:18px;margin-bottom:12px">Game Info</h3><p><strong>Game:</strong> ${state.gameName}</p><p><strong>Target:</strong> ${state.targetPoint}</p><p><strong>Players:</strong> ${state.players.length}</p><p><strong>Rounds:</strong> ${mr}</p></div>`;if(mr>0){h+=`<div><h3 style="color:var(--j-primary);font-size:18px;margin-bottom:12px">Scores</h3><table style="width:100%;border-collapse:collapse;margin:16px 0"><thead><tr><th style="padding:12px;text-align:left;border-bottom:1px solid var(--j-bg);background:var(--j-bg);font-weight:700;color:var(--j-dark)">Player</th>`;for(let i=0;i<mr;i++)h+=`<th style="padding:12px;text-align:left;border-bottom:1px solid var(--j-bg);background:var(--j-bg);font-weight:700;color:var(--j-dark)">R${i+1}</th>`;h+=`<th style="padding:12px;text-align:left;border-bottom:1px solid var(--j-bg);background:var(--j-bg);font-weight:700;color:var(--j-dark)">Total</th><th style="padding:12px;text-align:left;border-bottom:1px solid var(--j-bg);background:var(--j-bg);font-weight:700;color:var(--j-dark)">Status</th></tr></thead><tbody>`;state.players.forEach(p=>{const t=getTotal(p),io=t>=state.targetPoint,iw=w&&p.id===w.id;h+=`<tr style="${iw?'background:linear-gradient(to right,var(--yellow),var(--j-bg))!important;font-weight:700':''}"><td style="padding:12px;border-bottom:1px solid var(--j-bg)"><strong>${p.name}${iw?' ğŸ‘‘':''}</strong></td>`;for(let i=0;i<mr;i++)h+=`<td style="padding:12px;border-bottom:1px solid var(--j-bg)">${p.scores[i]!==undefined?p.scores[i]:'-'}</td>`;h+=`<td style="padding:12px;border-bottom:1px solid var(--j-bg)"><strong>${t}</strong></td><td style="padding:12px;border-bottom:1px solid var(--j-bg)">${io?'âŒ':'âœ“'}</td></tr>`});h+=`</tbody></table></div>`}h+=`<button style="width:100%;padding:14px;background:var(--j-primary);color:white;border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer;margin-top:20px" onclick="copyReport()">ğŸ“‹ Copy Report</button></div>`;document.getElementById('reportModal').innerHTML=h;document.getElementById('reportModal').style.display='block'}
function copyReport(){const w=getWinner(),mr=getMaxRounds(),gn=state.gameName.toUpperCase();let t='ğŸµ MONKEYS SCORE BOARD\n'+'='.repeat(50)+'\n\n';if(w){t+=`ğŸ‘‘ ${gn} KING: ${w.name}\nScore: ${getTotal(w)}\n\n`}t+=`GAME: ${state.gameName}\nTARGET: ${state.targetPoint}\nPLAYERS: ${state.players.length}\nROUNDS: ${mr}\n\n`;if(mr>0){t+=`SCORES:\n${'-'.repeat(50)}\n`;t+='Player'.padEnd(15);for(let i=0;i<mr;i++)t+=`R${i+1}`.padEnd(8);t+='Total\n'+'-'.repeat(50)+'\n';state.players.forEach(p=>{const to=getTotal(p);t+=p.name.padEnd(15);for(let i=0;i<mr;i++)t+=(p.scores[i]!==undefined?p.scores[i]:'-').toString().padEnd(8);t+=to+'\n'})}t+='\n'+'='.repeat(50)+'\n'+`Generated: ${new Date().toLocaleString()}\n`;navigator.clipboard.writeText(t).then(()=>alert('âœ… Copied!')).catch(()=>alert('âŒ Failed!'))}
function closeModal(i){document.getElementById(i).style.display='none'}
function selectPhoto(id){currentPhotoPlayer=id;document.getElementById('playerPhotoInput').click()}
function resizeImg(f,cb){const r=new FileReader();r.onload=e=>{const i=new Image();i.onload=()=>{const c=document.createElement('canvas'),w=200,h=200;c.width=w;c.height=h;const ctx=c.getContext('2d'),s=Math.min(i.width,i.height),x=(i.width-s)/2,y=(i.height-s)/2;ctx.drawImage(i,x,y,s,s,0,0,w,h);cb(c.toDataURL('image/jpeg',.7))};i.src=e.target.result};r.readAsDataURL(f)}
function addGallery(){const f=document.getElementById('galleryInput').files[0];if(!f)return;if(state.gallery.length>=20)return alert('Max 20 photos!');resizeImg(f,d=>{state.gallery.push({id:Date.now(),data:d});save();renderGallery()})}
function deleteGallery(id){if(!confirm('Delete photo?'))return;state.gallery=state.gallery.filter(g=>g.id!==id);save();renderGallery()}
function clearGallery(){showPin(()=>{state.gallery=[];save();renderGallery();alert('âœ… Cleared!')})}
function renderGallery(){const g=document.getElementById('galleryGrid');if(state.gallery.length===0){g.innerHTML='<p style="text-align:center;color:#9CA3AF;grid-column:1/-1">No photos yet</p>';return}g.innerHTML=state.gallery.map(p=>`<div class="gallery-item"><img src="${p.data}" alt="Event"><button class="delete" onclick="deleteGallery(${p.id})">Ã—</button></div>`).join('')}
function render(){const s=getSorted(),l=document.getElementById('playersList');l.innerHTML=s.map(p=>{const t=getTotal(p),io=t>=state.targetPoint,r=getMaxRounds()+1,id=state.roundDealers[r]===p.name;return`<div class="player-card" data-player-id="${p.id}" style="border-left-color:${p.color};background-color:${p.color}"><div class="player-header"><div style="display:flex;align-items:center"><div>${p.photo?`<img src="${p.photo}" class="player-photo" onclick="selectPhoto(${p.id})">`:`<div style="width:50px;height:50px;border-radius:50%;background:white;display:flex;align-items:center;justify-content:center;font-size:24px;border:3px solid var(--j-primary);margin-right:10px;cursor:pointer" onclick="selectPhoto(${p.id})">ğŸ“·</div>`}</div><div><div style="display:flex;align-items:center;gap:10px"><span class="player-name">${p.name}</span>${id?'<span class="dealer-badge">ğŸƒ DEALER</span>':''}</div><div style="font-size:13px;color:#6B7280;margin-top:6px">Rounds: ${p.scores.length}</div></div></div><div style="text-align:right"><div class="player-score">${t}</div><span class="status-badge ${io?'status-out':'status-in'}">${io?'âŒ OUT':'âœ“ IN'}</span></div></div><div class="controls" style="margin-bottom:12px"><input type="number" id="score-${p.id}" placeholder="Score" style="flex:1" data-player-id="${p.id}"><button class="btn-success" data-action="add" data-id="${p.id}">â•</button><button class="btn-warning" data-action="remove" data-id="${p.id}" ${p.scores.length===0?'disabled':''}>ğŸ—‘ï¸</button><button class="${id?'btn-warning':''}" data-action="dealer" data-id="${p.id}" style="${id?'':'background:var(--j-bg);color:var(--j-dark)'}">ğŸƒ</button></div>${p.scores.length>0?`<div style="display:flex;gap:6px;flex-wrap:wrap">${p.scores.map((sc,i)=>`<span style="background:white;padding:5px 12px;border-radius:12px;font-size:13px;font-weight:600;border:1px solid var(--j-primary)">R${i+1}: ${sc}</span>`).join('')}</div>`:''}</div>`}).join('');l.querySelectorAll('button[data-action]').forEach(b=>b.addEventListener('click',function(){const a=this.dataset.action,id=parseInt(this.dataset.id);if(a==='add')addScore(id);else if(a==='remove')removeScore(id);else if(a==='dealer')setDealer(id)}));l.querySelectorAll('input[data-player-id]').forEach(i=>i.addEventListener('keypress',e=>{if(e.key==='Enter')addScore(parseInt(i.dataset.playerId))}))}
document.addEventListener('DOMContentLoaded',()=>{load();document.getElementById('gameName').value=state.gameName;document.getElementById('targetPoint').value=state.targetPoint;document.getElementById('sortBy').value=state.sortBy;document.getElementById('soundToggle').textContent=sounds.enabled?'ğŸ”Š':'ğŸ”‡';render();renderGallery();document.getElementById('pinInput').addEventListener('keypress',e=>{if(e.key==='Enter')verifyPin()});document.querySelectorAll('.tab-btn').forEach(b=>b.addEventListener('click',function(){document.querySelectorAll('.tab-btn').forEach(bt=>bt.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));this.classList.add('active');document.getElementById(this.dataset.tab+'-tab').classList.add('active');sounds.click()}));document.getElementById('soundToggle').addEventListener('click',function(){sounds.enabled=!sounds.enabled;this.textContent=sounds.enabled?'ğŸ”Š':'ğŸ”‡';if(sounds.enabled)sounds.click();save()});document.getElementById('undoBtn').addEventListener('click',undo);document.getElementById('resetPointsBtn').addEventListener('click',()=>showPin(()=>{state.players.forEach(p=>{p.scores=[];p.dealerHistory=[]});state.roundDealers=[];state.undoStack=[];sounds.click();save();render();alert('âœ… Reset!')}));document.getElementById('resetPlayersBtn').addEventListener('click',()=>showPin(()=>{state.players=[];state.roundDealers=[];state.undoStack=[];sounds.click();save();render();alert('âœ… Deleted!')}));document.getElementById('addPlayerBtn').addEventListener('click',addPlayer);document.getElementById('newPlayerName').addEventListener('keypress',e=>{if(e.key==='Enter')addPlayer()});document.getElementById('targetPoint').addEventListener('change',function(){state.targetPoint=parseInt(this.value)||330;save();render()});document.getElementById('sortBy').addEventListener('change',function(){state.sortBy=this.value;save();render()});document.getElementById('gameName').addEventListener('input',function(){state.gameName=this.value;save()});document.getElementById('reportBtn').addEventListener('click',showReport);document.getElementById('saveGameBtn').addEventListener('click',saveGame);document.getElementById('loadGamesBtn').addEventListener('click',loadGames);document.getElementById('clearHistoryBtn').addEventListener('click',clearHistory);document.getElementById('viewStatsBtn').addEventListener('click',viewStats);document.getElementById('refreshStatsBtn').addEventListener('click',()=>{updateStats();alert('âœ… Refreshed!')});document.getElementById('galleryInput').addEventListener('change',addGallery);document.getElementById('clearGalleryBtn').addEventListener('click',clearGallery);document.getElementById('playerPhotoInput').addEventListener('change',function(){const f=this.files[0];if(!f||!currentPhotoPlayer)return;resizeImg(f,d=>{const p=state.players.find(pl=>pl.id===currentPhotoPlayer);if(p){p.photo=d;save();render()}currentPhotoPlayer=null})});window.onclick=e=>{if(e.target.classList.contains('modal'))e.target.style.display='none'}});
</script>
</body>
</html>
