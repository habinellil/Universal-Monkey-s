<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>üêµ Weekend Monkeys Score Board</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 10px;
        color: #333;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
    }

    .header {
        background: white;
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .header h1 {
        font-size: 22px;
        color: #4F46E5;
        margin-bottom: 10px;
    }

    .game-name-input {
        width: 100%;
        padding: 10px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 15px;
    }

    .controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
    }

    .controls label {
        font-weight: 600;
        font-size: 14px;
    }

    .controls input, .controls select, .controls button {
        padding: 8px 12px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 14px;
    }

    .controls button {
        background: #4F46E5;
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 600;
    }

    .controls button:active {
        transform: scale(0.95);
    }

    .reset-points-btn {
        background: #F97316 !important;
    }

    .reset-players-btn {
        background: #EF4444 !important;
    }

    .add-player-btn {
        background: #10B981 !important;
    }

    .chart-container {
        background: white;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .chart-title {
        font-size: 16px;
        font-weight: bold;
        color: #4F46E5;
    }

    .report-btn {
        background: #10B981;
        color: white;
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
    }

    .report-btn:active {
        transform: scale(0.95);
    }

    .chart {
        display: flex;
        align-items: flex-end;
        justify-content: space-around;
        height: 150px;
        border-bottom: 2px solid #e5e7eb;
        gap: 3px;
    }

    .bar-wrapper {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        height: 100%;
    }

    .bar-value {
        font-size: 10px;
        font-weight: bold;
        margin-bottom: 3px;
    }

    .bar {
        width: 100%;
        border-radius: 4px 4px 0 0;
        transition: height 0.3s ease;
        min-height: 3px;
    }

    .bar-label {
        font-size: 9px;
        font-weight: 600;
        margin-top: 4px;
        text-align: center;
        word-break: break-word;
    }

    .target-info {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        font-size: 12px;
    }

    .target-info strong {
        color: #EF4444;
    }

    .player-card {
        background: white;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 12px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        border-left: 5px solid;
    }

    .player-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }

    .player-name {
        font-size: 18px;
        font-weight: bold;
    }

    .dealer-badge {
        background: #F97316;
        color: white;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: bold;
    }

    .player-score {
        font-size: 28px;
        font-weight: bold;
    }

    .status-badge {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
        color: white;
    }

    .status-in {
        background: #10B981;
    }

    .status-out {
        background: #EF4444;
    }

    .score-input-row {
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
    }

    .score-input-row input {
        flex: 1;
        padding: 10px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 16px;
    }

    .score-input-row button {
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        font-size: 14px;
    }

    .add-btn {
        background: #4F46E5;
        color: white;
    }

    .remove-btn {
        background: #9CA3AF;
        color: white;
    }

    .dealer-btn {
        background: #F3F4F6;
        color: #374151;
    }

    .dealer-btn.active {
        background: #F97316;
        color: white;
    }

    .rounds {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
    }

    .round-badge {
        background: #F3F4F6;
        padding: 4px 10px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
    }

    .add-player-section {
        background: white;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 12px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .add-player-form {
        display: flex;
        gap: 8px;
    }

    .add-player-form input {
        flex: 1;
        padding: 10px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 16px;
    }

    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
    }

    .modal-content {
        background-color: white;
        margin: 5% auto;
        padding: 20px;
        border-radius: 15px;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #e5e7eb;
    }

    .modal-header h2 {
        color: #4F46E5;
        font-size: 20px;
    }

    .close-btn {
        font-size: 28px;
        font-weight: bold;
        color: #9CA3AF;
        cursor: pointer;
        border: none;
        background: none;
    }

    .close-btn:hover {
        color: #374151;
    }

    .report-section {
        margin-bottom: 20px;
    }

    .report-section h3 {
        color: #4F46E5;
        margin-bottom: 10px;
        font-size: 16px;
    }

    .report-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
    }

    .report-table th,
    .report-table td {
        border: 1px solid #e5e7eb;
        padding: 8px;
        text-align: left;
        font-size: 13px;
    }

    .report-table th {
        background-color: #F3F4F6;
        font-weight: bold;
    }

    .report-dealer {
        background-color: #FFF7ED;
    }

    .copy-report-btn {
        width: 100%;
        padding: 12px;
        background: #4F46E5;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 15px;
    }

    .copy-report-btn:active {
        transform: scale(0.98);
    }

    @media (max-width: 600px) {
        .header h1 {
            font-size: 18px;
        }
        
        .player-name {
            font-size: 16px;
        }
        
        .player-score {
            font-size: 24px;
        }

        .modal-content {
            width: 95%;
            margin: 10% auto;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêµ Weekend Monkeys Score Board</h1>
            <input type="text" id="gameName" class="game-name-input" placeholder="Enter game name (e.g., Rummy, Poker, UNO)">

```
        <div class="controls">
            <label>Target:</label>
            <input type="number" id="targetPoint" value="330" style="width: 80px;">
            
            <label>Sort:</label>
            <select id="sortBy">
                <option value="default">Default</option>
                <option value="name">Name</option>
                <option value="points">Points</option>
            </select>
            
            <button class="reset-points-btn" id="resetPointsBtn">üîÑ Reset Points</button>
            <button class="reset-players-btn" id="resetPlayersBtn">‚ùå Reset Players</button>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-header">
            <div class="chart-title">üìä Score Graph</div>
            <button class="report-btn" id="reportBtn">üìã Report</button>
        </div>
        <div class="chart" id="chart"></div>
        <div class="target-info">
            <span>Target Point:</span>
            <strong id="targetDisplay">330</strong>
        </div>
    </div>

    <div class="add-player-section">
        <div class="add-player-form">
            <input type="text" id="newPlayerName" placeholder="Enter player name">
            <button class="add-player-btn" id="addPlayerBtn">‚ûï Add Player</button>
        </div>
    </div>

    <div id="playersList"></div>
</div>

<!-- Report Modal -->
<div id="reportModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üìã Game Report</h2>
            <button class="close-btn" id="closeReportBtn">&times;</button>
        </div>
        <div id="reportContent"></div>
    </div>
</div>

<script>
    const INITIAL_PLAYERS = [
        { name: 'HABIN', color: '#FFE5E5' },
        { name: 'NOUFAL', color: '#E5F3FF' },
        { name: 'EMAD', color: '#FFF5E5' },
        { name: 'MUBASHIR', color: '#E5FFE5' },
        { name: 'LEO', color: '#FFE5FF' },
        { name: 'ASIF', color: '#E5FFFF' },
        { name: 'SHABIN', color: '#F5E5FF' },
        { name: 'MUTHU', color: '#FFFFE5' },
        { name: 'SALMAN', color: '#FFE5F0' }
    ];

    const COLORS = [
        '#FFE5E5', '#E5F3FF', '#FFF5E5', '#E5FFE5', '#FFE5FF',
        '#E5FFFF', '#F5E5FF', '#FFFFE5', '#FFE5F0', '#FFE5CC',
        '#E5FFCC', '#CCE5FF', '#FFCCE5', '#E5CCFF', '#CCFFE5'
    ];

    let gameState = {
        gameName: 'Rummy',
        targetPoint: 330,
        players: INITIAL_PLAYERS.map((p, i) => ({
            ...p,
            id: Date.now() + i,
            scores: [],
            dealerHistory: []
        })),
        sortBy: 'default',
        nextId: Date.now() + INITIAL_PLAYERS.length,
        roundDealers: []
    };

    // Load saved game state
    function loadGame() {
        const saved = localStorage.getItem('monkeysScoreBoard');
        if (saved) {
            try {
                gameState = JSON.parse(saved);
            } catch (e) {
                console.error('Error loading saved game:', e);
            }
        }
    }

    // Save game state
    function saveGame() {
        localStorage.setItem('monkeysScoreBoard', JSON.stringify(gameState));
    }

    // Add new player
    function addNewPlayer() {
        const input = document.getElementById('newPlayerName');
        const name = input.value.trim().toUpperCase();
        
        if (!name) {
            alert('Please enter a player name');
            return;
        }
        
        if (gameState.players.some(p => p.name === name)) {
            alert('Player already exists');
            return;
        }
        
        const color = COLORS[gameState.players.length % COLORS.length];
        
        gameState.players.push({
            id: gameState.nextId++,
            name: name,
            color: color,
            scores: [],
            dealerHistory: []
        });
        
        input.value = '';
        saveGame();
        render();
    }

    // Get sorted players
    function getSortedPlayers() {
        let sorted = [...gameState.players];
        
        if (gameState.sortBy === 'name') {
            sorted.sort((a, b) => a.name.localeCompare(b.name));
        } else if (gameState.sortBy === 'points') {
            sorted.sort((a, b) => {
                const aTotal = a.scores.reduce((sum, s) => sum + s, 0);
                const bTotal = b.scores.reduce((sum, s) => sum + s, 0);
                return bTotal - aTotal;
            });
        }
        
        return sorted;
    }

    // Calculate total score
    function getTotalScore(player) {
        return player.scores.reduce((sum, s) => sum + s, 0);
    }

    // Get max rounds
    function getMaxRounds() {
        return Math.max(...gameState.players.map(p => p.scores.length), 0);
    }

    // Add score
    function addScore(playerId) {
        const input = document.getElementById(`score-${playerId}`);
        const score = parseInt(input.value) || 0;
        
        if (score === 0 && input.value !== '0') return;
        
        const player = gameState.players.find(p => p.id === playerId);
        if (player) {
            player.scores.push(score);
            input.value = '';
            saveGame();
            render();
        }
    }

    // Remove last score
    function removeLastScore(playerId) {
        const player = gameState.players.find(p => p.id === playerId);
        if (player && player.scores.length > 0) {
            player.scores.pop();
            saveGame();
            render();
        }
    }

    // Set dealer
    function setDealer(playerId) {
        const currentRound = getMaxRounds() + 1;
        const player = gameState.players.find(p => p.id === playerId);
        
        if (player) {
            gameState.roundDealers[currentRound - 1] = player.name;
        }
        
        saveGame();
        render();
    }

    // Show report
    function showReport() {
        const modal = document.getElementById('reportModal');
        const content = document.getElementById('reportContent');
        
        const maxRounds = getMaxRounds();
        
        if (gameState.players.length === 0) {
            content.innerHTML = '<p style="text-align: center; color: #9CA3AF;">No data to report. Add players and start playing!</p>';
            modal.style.display = 'block';
            return;
        }
        
        let reportHTML = `
            <div class="report-section">
                <h3>Game Information</h3>
                <p><strong>Game Name:</strong> ${gameState.gameName || 'Not Set'}</p>
                <p><strong>Target Point:</strong> ${gameState.targetPoint}</p>
                <p><strong>Total Players:</strong> ${gameState.players.length}</p>
                <p><strong>Total Rounds:</strong> ${maxRounds}</p>
            </div>
        `;
        
        if (maxRounds > 0) {
            reportHTML += `
                <div class="report-section">
                    <h3>Score Details</h3>
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Player</th>
                                ${Array.from({length: maxRounds}, (_, i) => `<th>R${i + 1}</th>`).join('')}
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${gameState.players.map(player => {
                                const total = getTotalScore(player);
                                const isOut = total >= gameState.targetPoint;
                                return `
                                    <tr>
                                        <td><strong>${player.name}</strong></td>
                                        ${Array.from({length: maxRounds}, (_, i) => 
                                            `<td>${player.scores[i] !== undefined ? player.scores[i] : '-'}</td>`
                                        ).join('')}
                                        <td><strong>${total}</strong></td>
                                        <td>${isOut ? '‚ùå OUT' : '‚úì IN'}</td>
                                    </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            if (gameState.roundDealers.length > 0) {
                reportHTML += `
                    <div class="report-section">
                        <h3>Dealer History</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Round</th>
                                    <th>Dealer</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${gameState.roundDealers.map((dealer, i) => 
                                    dealer ? `
                                        <tr class="report-dealer">
                                            <td><strong>Round ${i + 1}</strong></td>
                                            <td>üÉè ${dealer}</td>
                                        </tr>
                                    ` : ''
                                ).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }
        }
        
        reportHTML += `<button class="copy-report-btn" id="copyReportBtn">üìã Copy Report as Text</button>`;
        
        content.innerHTML = reportHTML;
        modal.style.display = 'block';
        
        // Add event listener to copy button
        document.getElementById('copyReportBtn').addEventListener('click', copyReport);
    }

    // Close report
    function closeReport() {
        document.getElementById('reportModal').style.display = 'none';
    }

    // Copy report as text
    function copyReport() {
        const maxRounds = getMaxRounds();
        let reportText = `üêµ WEEKEND MONKEYS SCORE BOARD\n`;
        reportText += `${'='.repeat(50)}\n\n`;
        reportText += `GAME: ${gameState.gameName || 'Not Set'}\n`;
        reportText += `TARGET POINT: ${gameState.targetPoint}\n`;
        reportText += `TOTAL PLAYERS: ${gameState.players.length}\n`;
        reportText += `TOTAL ROUNDS: ${maxRounds}\n\n`;
        
        if (maxRounds > 0) {
            reportText += `SCORE DETAILS:\n`;
            reportText += `${'-'.repeat(50)}\n`;
            
            reportText += `Player`.padEnd(15);
            for (let i = 0; i < maxRounds; i++) {
                reportText += `R${i + 1}`.padEnd(8);
            }
            reportText += `Total`.padEnd(10) + `Status\n`;
            reportText += `${'-'.repeat(50)}\n`;
            
            gameState.players.forEach(player => {
                const total = getTotalScore(player);
                const isOut = total >= gameState.targetPoint;
                reportText += `${player.name}`.padEnd(15);
                for (let i = 0; i < maxRounds; i++) {
                    const score = player.scores[i] !== undefined ? player.scores[i] : '-';
                    reportText += `${score}`.padEnd(8);
                }
                reportText += `${total}`.padEnd(10);
                reportText += `${isOut ? 'OUT' : 'IN'}\n`;
            });
            
            if (gameState.roundDealers.length > 0) {
                reportText += `\n${'='.repeat(50)}\n`;
                reportText += `DEALER HISTORY:\n`;
                reportText += `${'-'.repeat(50)}\n`;
                gameState.roundDealers.forEach((dealer, i) => {
                    if (dealer) {
                        reportText += `Round ${i + 1}: üÉè ${dealer}\n`;
                    }
                });
            }
        }
        
        reportText += `\n${'='.repeat(50)}\n`;
        reportText += `Generated: ${new Date().toLocaleString()}\n`;
        
        navigator.clipboard.writeText(reportText).then(() => {
            alert('‚úÖ Report copied to clipboard!\n\nYou can now paste it in WhatsApp, Notes, or any text app.');
        }).catch(() => {
            alert('‚ùå Failed to copy. Please try selecting and copying manually.');
        });
    }

    // Render players
    function renderPlayers() {
        const container = document.getElementById('playersList');
        const sorted = getSortedPlayers();
        
        container.innerHTML = sorted.map(player => {
            const total = getTotalScore(player);
            const isOut = total >= gameState.targetPoint;
            const currentRound = getMaxRounds() + 1;
            const isCurrentDealer = gameState.roundDealers[currentRound - 1] === player.name;
            
            return `
                <div class="player-card" 
                     style="border-left-color: ${player.color}; background-color: ${player.color};">
                    <div class="player-header">
                        <div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span class="player-name">${player.name}</span>
                                ${isCurrentDealer ? '<span class="dealer-badge">üÉè DEALER</span>' : ''}
                            </div>
                            <div style="font-size: 12px; color: #6B7280; margin-top: 4px;">
                                Rounds: ${player.scores.length}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div class="player-score">${total}</div>
                            <span class="status-badge ${isOut ? 'status-out' : 'status-in'}">
                                ${isOut ? '‚ùå OUT' : '‚úì IN'}
                            </span>
                        </div>
                    </div>
                    
                    <div class="score-input-row">
                        <input type="number" id="score-${player.id}" placeholder="Add score" 
                               data-player-id="${player.id}">
                        <button class="add-btn" data-action="add" data-player-id="${player.id}">‚ûï</button>
                        <button class="remove-btn" data-action="remove" data-player-id="${player.id}" 
                                ${player.scores.length === 0 ? 'disabled' : ''}>üóëÔ∏è</button>
                        <button class="dealer-btn ${isCurrentDealer ? 'active' : ''}" 
                                data-action="dealer" data-player-id="${player.id}">üÉè</button>
                    </div>
                    
                    ${player.scores.length > 0 ? `
                        <div class="rounds">
                            ${player.scores.map((score, i) => 
                                `<span class="round-badge">R${i + 1}: ${score}</span>`
                            ).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }).join('');
        
        // Add event listeners to all player buttons
        container.querySelectorAll('button[data-action]').forEach(btn => {
            btn.addEventListener('click', function() {
                const action = this.getAttribute('data-action');
                const playerId = parseInt(this.getAttribute('data-player-id'));
                
                if (action === 'add') {
                    addScore(playerId);
                } else if (action === 'remove') {
                    removeLastScore(playerId);
                } else if (action === 'dealer') {
                    setDealer(playerId);
                }
            });
        });
        
        // Add enter key listeners to score inputs
        container.querySelectorAll('input[data-player-id]').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const playerId = parseInt(this.getAttribute('data-player-id'));
                    addScore(playerId);
                }
            });
        });
    }

    // Render chart
    function renderChart() {
        const chart = document.getElementById('chart');
        const sorted = getSortedPlayers();
        
        if (sorted.length === 0) {
            chart.innerHTML = '<p style="text-align: center; color: #9CA3AF; padding: 20px;">Add players to see the graph</p>';
            return;
        }
        
        const maxScore = Math.max(
            ...sorted.map(p => getTotalScore(p)),
            gameState.targetPoint,
            10
        );
        
        chart.innerHTML = sorted.map(player => {
            const total = getTotalScore(player);
            const height = maxScore > 0 ? (total / maxScore) * 100 : 0;
            
            return `
                <div class="bar-wrapper">
                    <div class="bar-value">${total}</div>
                    <div class="bar" style="height: ${height}%; background-color: ${player.color}; 
                                            border: 2px solid ${player.color}; filter: brightness(0.85);"></div>
                    <div class="bar-label">${player.name.slice(0, 6)}</div>
                </div>
            `;
        }).join('');
    }

    // Main render
    function render() {
        renderPlayers();
        renderChart();
        document.getElementById('targetDisplay').textContent = gameState.targetPoint;
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        loadGame();
        
        // Set initial values
        document.getElementById('targetPoint').value = gameState.targetPoint;
        document.getElementById('sortBy').value = gameState.sortBy;
        document.getElementById('gameName').value = gameState.gameName;
        
        // Initial render
        render();
        
        // Reset Points button
        document.getElementById('resetPointsBtn').addEventListener('click', function() {
            if (confirm('‚ö†Ô∏è RESET ALL SCORES?\n\nThis will:\n‚Ä¢ Clear all points for all players\n‚Ä¢ Keep all players in the game\n‚Ä¢ Clear dealer history\n\nThis action CANNOT be undone!\n\nClick OK to reset scores.')) {
                gameState.players.forEach(p => {
                    p.scores = [];
                    p.dealerHistory = [];
                });
                gameState.roundDealers = [];
                saveGame();
                render();
                alert('‚úÖ All scores have been reset!');
            }
        });
        
        // Reset Players button
        document.getElementById('resetPlayersBtn').addEventListener('click', function() {
            if (confirm('‚ö†Ô∏è DELETE ALL PLAYERS?\n\nThis will:\n‚Ä¢ Remove ALL players from the game\n‚Ä¢ Delete ALL scores\n‚Ä¢ Clear everything\n\nThis action CANNOT be undone!\n\nClick OK to delete all players.')) {
                gameState.players = [];
                gameState.roundDealers = [];
                gameState.nextId = Date.now();
                saveGame();
                render();
                alert('‚úÖ All players have been deleted!');
            }
        });
        
        // Add Player button
        document.getElementById('addPlayerBtn').addEventListener('click', addNewPlayer);
        
        // Add player on Enter key
        document.getElementById('newPlayerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addNewPlayer();
            }
        });
        
        // Target point change
        document.getElementById('targetPoint').addEventListener('change', function() {
            gameState.targetPoint = parseInt(this.value) || 330;
            saveGame();
            render();
        });
        
        // Sort change
        document.getElementById('sortBy').addEventListener('change', function() {
            gameState.sortBy = this.value;
            saveGame();
            render();
        });
        
        // Game name change
        document.getElementById('gameName').addEventListener('input', function() {
            gameState.gameName = this.value || 'Rummy';
            saveGame();
        });
        
        // Report button
        document.getElementById('reportBtn').addEventListener('click', showReport);
        
        // Close report button
        document.getElementById('closeReportBtn').addEventListener('click', closeReport);
        
        // Close modal when clicking outside
        document.getElementById('reportModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeReport();
            }
        });
    });
</script>
```

</body>
</html>